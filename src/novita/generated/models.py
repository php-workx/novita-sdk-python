# generated by datamodel-codegen:
#   filename:  novita-api.yaml
#   timestamp: 2025-10-25T12:48:09+00:00

from __future__ import annotations

from enum import Enum
from typing import Annotated, Any, Literal, Optional

from pydantic import AwareDatetime, BaseModel, Field


class Cluster(BaseModel):
    id: Annotated[str, Field(description="Cluster ID")]
    name: Annotated[str, Field(description="Cluster name")]
    available_gpu_type: Annotated[
        list[str],
        Field(alias="availableGpuType", description="Supported GPU types in the cluster"),
    ]
    support_network_storage: Annotated[
        bool,
        Field(
            alias="supportNetworkStorage",
            description="Whether cloud storage creation is supported",
        ),
    ]
    support_instance_network: Annotated[
        bool,
        Field(
            alias="supportInstanceNetwork",
            description="Whether VPC network creation is supported",
        ),
    ]


class Kind(Enum):
    """
    Instance type
    """

    gpu = "gpu"
    cpu = "cpu"


class Env(BaseModel):
    key: str
    value: str


class BillingMode(Enum):
    """
    Billing mode
    """

    on_demand = "onDemand"
    monthly = "monthly"
    spot = "spot"


class CreateInstanceRequest(BaseModel):
    name: Annotated[
        str | None,
        Field(description="Name for the instance", max_length=255, min_length=0),
    ] = None
    product_id: Annotated[
        str,
        Field(
            alias="productId",
            description="GPU product identifier",
            max_length=255,
            min_length=1,
        ),
    ]
    gpu_num: Annotated[int, Field(alias="gpuNum", description="Number of GPUs", ge=1, le=8)]
    rootfs_size: Annotated[
        int,
        Field(alias="rootfsSize", description="Root filesystem size in GB", ge=10, le=6144),
    ]
    image_url: Annotated[
        str,
        Field(
            alias="imageUrl",
            description="Container image URL",
            max_length=500,
            min_length=1,
        ),
    ]
    kind: Annotated[Kind, Field(description="Instance type")]
    image_auth: Annotated[
        str | None, Field(alias="imageAuth", description="Registry credentials")
    ] = None
    image_auth_id: Annotated[
        str | None,
        Field(alias="imageAuthId", description="Authentication reference ID"),
    ] = None
    ports: Annotated[str | None, Field(description="Exposed ports with protocols")] = None
    envs: Annotated[
        list[Env] | None, Field(description="Environment variables", max_length=100)
    ] = None
    tools: Annotated[
        list[dict[str, Any]] | None,
        Field(description="Tool configuration (e.g., Jupyter)"),
    ] = None
    command: Annotated[
        str | None,
        Field(description="Startup command", max_length=2047, min_length=0),
    ] = None
    cluster_id: Annotated[
        str | None,
        Field(alias="clusterId", description="Cluster placement specification"),
    ] = None
    network_storages: Annotated[
        list[dict[str, Any]] | None,
        Field(alias="networkStorages", description="Cloud storage mounts", max_length=30),
    ] = None
    network_id: Annotated[
        str | None, Field(alias="networkId", description="VPC network reference")
    ] = None
    month: Annotated[int | None, Field(description="Subscription duration in months")] = None
    billing_mode: Annotated[
        BillingMode | None, Field(alias="billingMode", description="Billing mode")
    ] = None


class Type(Enum):
    """
    Protocol type
    """

    tcp = "tcp"
    http = "http"


class Port(BaseModel):
    port: Annotated[
        int | None,
        Field(
            description="Port number (1-65535, excluding 2222, 2223, 2224)",
            ge=1,
            le=65535,
        ),
    ] = None
    type: Annotated[Type | None, Field(description="Protocol type")] = None


class UpdateInstanceRequest(BaseModel):
    name: Annotated[str | None, Field(description="New name for the instance")] = None
    ports: Annotated[
        list[Port] | None,
        Field(
            description="Port configurations (max 15 combined with tools)",
            max_length=15,
        ),
    ] = None
    expand_root_disk: Annotated[
        int | None,
        Field(
            alias="expandRootDisk",
            description="Disk expansion in GB (0 means no expansion)",
            ge=0,
        ),
    ] = None


class VolumeMount(BaseModel):
    type: Annotated[Literal["network"], Field(description='Must be "network"')]
    id: Annotated[str, Field(description="Storage identifier")]
    mount_path: Annotated[
        str,
        Field(
            alias="mountPath",
            description="Attachment location",
            max_length=4095,
            min_length=1,
        ),
    ]


class NetworkVolume(BaseModel):
    """
    Cloud storage configuration
    """

    volume_mounts: Annotated[
        list[VolumeMount],
        Field(
            alias="volumeMounts",
            description="Cloud storage mounts (max 30, use empty array to remove all)",
            max_length=30,
        ),
    ]


class UpgradeInstanceRequest(BaseModel):
    instance_id: Annotated[
        str,
        Field(alias="instanceId", description="Identifier for the instance being upgraded"),
    ]
    image_url: Annotated[
        str,
        Field(
            alias="imageUrl",
            description="Container image location",
            max_length=500,
            min_length=1,
        ),
    ]
    image_auth_id: Annotated[
        str | None,
        Field(alias="imageAuthId", description="Registry authentication credential"),
    ] = None
    envs: Annotated[list[Env], Field(description="Environment variable pairs", max_length=100)]
    command: Annotated[
        str,
        Field(description="Container startup instruction", max_length=2047, min_length=0),
    ]
    save: Annotated[bool, Field(description="Whether to retain data from the previous instance")]
    network_volume: Annotated[
        NetworkVolume,
        Field(alias="networkVolume", description="Cloud storage configuration"),
    ]


class CreateInstanceResponse(BaseModel):
    instance_id: Annotated[
        str, Field(description="ID of the created instance", examples=["inst-abc123"])
    ]
    status: Annotated[
        str, Field(description="Initial status of the instance", examples=["PENDING"])
    ]


class Status(Enum):
    to_create = "toCreate"
    creating = "creating"
    pulling = "pulling"
    running = "running"
    to_start = "toStart"
    starting = "starting"
    to_stop = "toStop"
    stopping = "stopping"
    exited = "exited"
    to_restart = "toRestart"
    restarting = "restarting"
    to_remove = "toRemove"
    removing = "removing"
    removed = "removed"
    to_reset = "toReset"
    resetting = "resetting"
    migrating = "migrating"
    freezing = "freezing"


class PortMapping(BaseModel):
    port: int | None = None
    endpoint: str | None = None
    protocol: str | None = None


class Type1(Enum):
    network = "network"
    local = "local"


class VolumeMount1(BaseModel):
    type: Type1 | None = None
    id: str | None = None
    size: int | None = None
    mount_path: Annotated[str | None, Field(alias="mountPath")] = None


class Env2(BaseModel):
    key: str | None = None
    value: str | None = None


class SpotStatus(Enum):
    """
    Spot instance status
    """

    running = "running"
    notified = "notified"
    reclaiming = "reclaiming"
    terminated = "terminated"


class StatusError(BaseModel):
    """
    Error information if instance failed
    """

    code: str | None = None
    message: str | None = None


class ConnectComponentSsh(BaseModel):
    """
    SSH connection details
    """

    ssh_command: Annotated[str | None, Field(alias="sshCommand")] = None
    password: str | None = None
    is_running: Annotated[bool | None, Field(alias="isRunning")] = None


class ConnectComponentWebTerminal(BaseModel):
    """
    Web terminal connection details
    """

    address: str | None = None
    username: str | None = None
    password: str | None = None
    is_running: Annotated[bool | None, Field(alias="isRunning")] = None


class ConnectComponentJupyter(BaseModel):
    """
    Jupyter connection details
    """

    port: int | None = None
    address: str | None = None
    is_running: Annotated[bool | None, Field(alias="isRunning")] = None


class ConnectComponentLog(BaseModel):
    """
    Log access details
    """

    system_log_address: Annotated[str | None, Field(alias="systemLogAddress")] = None
    instance_log_address: Annotated[str | None, Field(alias="instanceLogAddress")] = None


class Network(BaseModel):
    """
    VPC network configuration
    """

    id: str | None = None
    ip_address: Annotated[str | None, Field(alias="ipAddress")] = None


class Node(BaseModel):
    """
    Node information
    """

    max_rootfs_size: Annotated[int | None, Field(alias="maxRootfsSize")] = None


class InstanceInfo(BaseModel):
    id: Annotated[str, Field(description="Unique identifier")]
    name: Annotated[str, Field(description="Instance name")]
    cluster_id: Annotated[
        str,
        Field(alias="clusterId", description="Cluster ID where instance is running"),
    ]
    cluster_name: Annotated[
        str | None, Field(alias="clusterName", description="Cluster name")
    ] = None
    status: Status
    image_url: Annotated[
        str | None, Field(alias="imageUrl", description="Container image URL")
    ] = None
    image_auth_id: Annotated[
        str | None, Field(alias="imageAuthId", description="Image authentication ID")
    ] = None
    cpu_num: Annotated[int | None, Field(alias="cpuNum", description="Number of CPU cores")] = (
        None
    )
    memory: Annotated[int | None, Field(description="Memory size in GB")] = None
    gpu_num: Annotated[int | None, Field(alias="gpuNum", description="Number of GPUs")] = None
    rootfs_size: Annotated[
        int | None,
        Field(alias="rootfsSize", description="Root filesystem size in GB"),
    ] = None
    command: Annotated[str | None, Field(description="Startup command")] = None
    port_mappings: Annotated[
        list[PortMapping] | None,
        Field(alias="portMappings", description="Port mapping configurations"),
    ] = None
    volume_mounts: Annotated[
        list[VolumeMount1] | None,
        Field(alias="volumeMounts", description="Volume mount configurations"),
    ] = None
    envs: Annotated[list[Env2] | None, Field(description="Environment variables")] = None
    billing_mode: Annotated[
        BillingMode | None, Field(alias="billingMode", description="Billing mode")
    ] = None
    end_time: Annotated[
        int | None,
        Field(
            alias="endTime",
            description="Expiration timestamp for subscription instances",
        ),
    ] = None
    spot_status: Annotated[
        SpotStatus | None,
        Field(alias="spotStatus", description="Spot instance status"),
    ] = None
    spot_reclaim_time: Annotated[
        int | None,
        Field(alias="spotReclaimTime", description="Spot instance reclaim timestamp"),
    ] = None
    product_id: Annotated[str | None, Field(alias="productId", description="Product ID")] = None
    product_name: Annotated[
        str | None, Field(alias="productName", description="Product name")
    ] = None
    status_error: Annotated[
        StatusError | None,
        Field(alias="statusError", description="Error information if instance failed"),
    ] = None
    connect_component_ssh: Annotated[
        ConnectComponentSsh | None,
        Field(alias="connectComponentSSH", description="SSH connection details"),
    ] = None
    connect_component_web_terminal: Annotated[
        ConnectComponentWebTerminal | None,
        Field(
            alias="connectComponentWebTerminal",
            description="Web terminal connection details",
        ),
    ] = None
    connect_component_jupyter: Annotated[
        ConnectComponentJupyter | None,
        Field(alias="connectComponentJupyter", description="Jupyter connection details"),
    ] = None
    connect_component_log: Annotated[
        ConnectComponentLog | None,
        Field(alias="connectComponentLog", description="Log access details"),
    ] = None
    network: Annotated[Network | None, Field(description="VPC network configuration")] = None
    jobs: Annotated[list[dict[str, Any]] | None, Field(description="Running jobs")] = None
    keep_data_day: Annotated[
        int | None,
        Field(alias="keepDataDay", description="Data retention period in days"),
    ] = None
    free_storage_size: Annotated[
        int | None,
        Field(alias="freeStorageSize", description="Free storage size in GB"),
    ] = None
    node: Annotated[Node | None, Field(description="Node information")] = None


class InstanceActionResponse(BaseModel):
    instance_id: Annotated[str, Field(description="Instance ID")]
    success: Annotated[bool, Field(description="Whether the action succeeded")]
    message: Annotated[str | None, Field(description="Optional message")] = None


class ListInstancesResponse(BaseModel):
    instances: list[InstanceInfo]
    total: Annotated[int, Field(description="Total number of instances")]


class SubscriptionPrice(BaseModel):
    price: Annotated[int, Field(description="Unit price for the subscription instance")]
    month: Annotated[int, Field(description="Subscription duration, in months")]


class InventoryState(Enum):
    """
    Stock status
    """

    none = "none"
    low = "low"
    normal = "normal"
    high = "high"


class GPUProduct(BaseModel):
    id: Annotated[str, Field(description="Product ID")]
    name: Annotated[str, Field(description="Product name")]
    cpu_per_gpu: Annotated[int, Field(alias="cpuPerGpu", description="Number of CPU cores per GPU")]
    memory_per_gpu: Annotated[
        int, Field(alias="memoryPerGpu", description="Memory size per GPU (GB)")
    ]
    disk_per_gpu: Annotated[int, Field(alias="diskPerGpu", description="Disk size per GPU (GB)")]
    available_deploy: Annotated[
        bool,
        Field(
            alias="availableDeploy",
            description="Whether this product can be used to create an instance",
        ),
    ]
    min_root_fs: Annotated[
        int,
        Field(alias="minRootFS", description="Minimum available root filesystem size (GB)"),
    ]
    max_root_fs: Annotated[
        int,
        Field(alias="maxRootFS", description="Maximum available root filesystem size (GB)"),
    ]
    min_local_storage: Annotated[
        int,
        Field(
            alias="minLocalStorage",
            description="Minimum available local storage size (GB)",
        ),
    ]
    max_local_storage: Annotated[
        int,
        Field(
            alias="maxLocalStorage",
            description="Maximum available local storage size (GB)",
        ),
    ]
    regions: Annotated[list[str], Field(description="Available clusters")]
    price: Annotated[int, Field(description="Price for creating a pay-as-you-go instance")]
    monthly_price: Annotated[
        list[SubscriptionPrice],
        Field(
            alias="monthlyPrice",
            description="Price for creating a subscription instance",
        ),
    ]
    billing_methods: Annotated[
        list[str],
        Field(alias="billingMethods", description="Supported billing methods"),
    ]
    spot_price: Annotated[str, Field(alias="spotPrice", description="Spot billing instance price")]
    inventory_state: Annotated[
        InventoryState | None,
        Field(alias="inventoryState", description="Stock status"),
    ] = None


class ListGPUProductsResponse(BaseModel):
    data: Annotated[list[GPUProduct], Field(description="List of GPU product information")]


class CPUProduct(BaseModel):
    id: Annotated[str, Field(description="Unique product identifier")]
    name: Annotated[str, Field(description="Product display name")]
    cpu_num: Annotated[int, Field(alias="cpuNum", description="Number of CPU cores")]
    memory_size: Annotated[int, Field(alias="memorySize", description="RAM allocation in GB")]
    rootfs_size: Annotated[
        int, Field(alias="rootfsSize", description="Root filesystem capacity in GB")
    ]
    local_volume_size: Annotated[
        int, Field(alias="localVolumeSize", description="Local storage in GB")
    ]
    available_deploy: Annotated[
        bool,
        Field(
            alias="availableDeploy",
            description="Whether this product can be used to create an instance",
        ),
    ]
    price: Annotated[int, Field(description="Product unit cost")]


class ListCPUProductsResponse(BaseModel):
    data: Annotated[list[CPUProduct], Field(description="List of CPU product information")]


class ErrorResponse(BaseModel):
    message: str
    details: dict[str, Any] | None = None


class Status1(Enum):
    """
    Current endpoint status
    """

    pending = "pending"
    running = "running"
    stopped = "stopped"
    error = "error"


class EndpointDetail(BaseModel):
    id: Annotated[str, Field(description="Unique endpoint identifier")]
    name: Annotated[str, Field(description="Endpoint name")]
    status: Annotated[Status1, Field(description="Current endpoint status")]
    image_url: Annotated[
        str | None, Field(alias="imageUrl", description="Container image URL")
    ] = None
    product_id: Annotated[str | None, Field(alias="productId", description="GPU product ID")] = (
        None
    )
    gpu_num: Annotated[int | None, Field(alias="gpuNum", description="Number of GPUs")] = None
    created_at: Annotated[
        AwareDatetime | None,
        Field(alias="createdAt", description="Creation timestamp"),
    ] = None
    updated_at: Annotated[
        AwareDatetime | None,
        Field(alias="updatedAt", description="Last update timestamp"),
    ] = None


class Env3(BaseModel):
    key: str
    value: str


class CreateEndpointRequest(BaseModel):
    name: Annotated[str, Field(description="Endpoint name", max_length=255, min_length=1)]
    image_url: Annotated[
        str,
        Field(
            alias="imageUrl",
            description="Container image URL",
            max_length=500,
            min_length=1,
        ),
    ]
    product_id: Annotated[str, Field(alias="productId", description="GPU product identifier")]
    gpu_num: Annotated[int, Field(alias="gpuNum", description="Number of GPUs", ge=1, le=8)]
    image_auth_id: Annotated[
        str | None,
        Field(alias="imageAuthId", description="Image registry authentication ID"),
    ] = None
    envs: Annotated[
        list[Env3] | None, Field(description="Environment variables", max_length=100)
    ] = None
    command: Annotated[str | None, Field(description="Startup command")] = None


class Env4(BaseModel):
    key: str | None = None
    value: str | None = None


class UpdateEndpointRequest(BaseModel):
    name: Annotated[str | None, Field(description="New endpoint name")] = None
    image_url: Annotated[
        str | None, Field(alias="imageUrl", description="New container image URL")
    ] = None
    envs: Annotated[list[Env4] | None, Field(description="Environment variables")] = None


class Job(BaseModel):
    id: Annotated[str, Field(description="Job identifier")]
    type: Annotated[str, Field(description="Job type")]
    status: Annotated[str, Field(description="Job status")]
    instance_id: Annotated[
        str | None, Field(alias="instanceId", description="Associated instance ID")
    ] = None
    created_at: Annotated[
        AwareDatetime | None,
        Field(alias="createdAt", description="Job creation time"),
    ] = None


class SaveImageRequest(BaseModel):
    instance_id: Annotated[
        str, Field(alias="instanceId", description="Instance ID to save image from")
    ]
    image_name: Annotated[
        str,
        Field(
            alias="imageName",
            description="Name for the saved image",
            max_length=255,
            min_length=1,
        ),
    ]
    description: Annotated[str | None, Field(description="Image description")] = None


class ImagePrewarmTask(BaseModel):
    id: Annotated[str, Field(description="Task identifier")]
    image_url: Annotated[str, Field(alias="imageUrl", description="Container image URL")]
    status: Annotated[str, Field(description="Task status")]
    cluster_id: Annotated[
        str | None, Field(alias="clusterId", description="Target cluster ID")
    ] = None
    created_at: Annotated[
        AwareDatetime | None,
        Field(alias="createdAt", description="Task creation time"),
    ] = None


class CreateImagePrewarmRequest(BaseModel):
    image_url: Annotated[
        str,
        Field(
            alias="imageUrl",
            description="Container image URL to prewarm",
            max_length=500,
            min_length=1,
        ),
    ]
    cluster_id: Annotated[str, Field(alias="clusterId", description="Target cluster ID")]
    image_auth_id: Annotated[
        str | None,
        Field(alias="imageAuthId", description="Image registry authentication ID"),
    ] = None


class UpdateImagePrewarmRequest(BaseModel):
    id: Annotated[str, Field(description="Prewarm task ID to update")]
    image_url: Annotated[str | None, Field(alias="imageUrl", description="New image URL")] = None


class RepositoryAuth(BaseModel):
    id: Annotated[str, Field(description="Authentication identifier")]
    registry: Annotated[str, Field(description="Registry URL")]
    username: Annotated[str | None, Field(description="Registry username")] = None
    created_at: Annotated[
        AwareDatetime | None, Field(alias="createdAt", description="Creation time")
    ] = None


class CreateRepositoryAuthRequest(BaseModel):
    registry: Annotated[str, Field(description="Registry URL", max_length=500, min_length=1)]
    username: Annotated[str, Field(description="Registry username", min_length=1)]
    password: Annotated[str, Field(description="Registry password", min_length=1)]


class DeleteRepositoryAuthRequest(BaseModel):
    id: Annotated[str, Field(description="Authentication ID to delete")]


class NetworkModel(BaseModel):
    id: Annotated[str, Field(description="Network identifier")]
    name: Annotated[str, Field(description="Network name")]
    cluster_id: Annotated[str, Field(alias="clusterId", description="Cluster ID")]
    cidr: Annotated[str | None, Field(description="Network CIDR block")] = None
    created_at: Annotated[
        AwareDatetime | None, Field(alias="createdAt", description="Creation time")
    ] = None


class CreateNetworkRequest(BaseModel):
    name: Annotated[str, Field(description="Network name", max_length=255, min_length=1)]
    cluster_id: Annotated[str, Field(alias="clusterId", description="Target cluster ID")]


class UpdateNetworkRequest(BaseModel):
    id: Annotated[str, Field(description="Network ID to update")]
    name: Annotated[str | None, Field(description="New network name")] = None


class DeleteNetworkRequest(BaseModel):
    id: Annotated[str, Field(description="Network ID to delete")]


class NetworkStorage(BaseModel):
    id: Annotated[str, Field(description="Storage identifier")]
    name: Annotated[str, Field(description="Storage volume name")]
    size: Annotated[int, Field(description="Storage size in GB")]
    cluster_id: Annotated[str, Field(alias="clusterId", description="Cluster ID")]
    status: Annotated[str | None, Field(description="Storage status")] = None
    created_at: Annotated[
        AwareDatetime | None, Field(alias="createdAt", description="Creation time")
    ] = None


class CreateNetworkStorageRequest(BaseModel):
    name: Annotated[str, Field(description="Storage volume name", max_length=255, min_length=1)]
    size: Annotated[int, Field(description="Storage size in GB", ge=10, le=10240)]
    cluster_id: Annotated[str, Field(alias="clusterId", description="Target cluster ID")]


class UpdateNetworkStorageRequest(BaseModel):
    id: Annotated[str, Field(description="Storage ID to update")]
    name: Annotated[str | None, Field(description="New storage name")] = None
    size: Annotated[int | None, Field(description="New storage size in GB")] = None


class DeleteNetworkStorageRequest(BaseModel):
    id: Annotated[str, Field(description="Storage ID to delete")]


class Template(BaseModel):
    id: Annotated[str, Field(description="Template identifier")]
    name: Annotated[str, Field(description="Template name")]
    image_url: Annotated[
        str | None, Field(alias="imageUrl", description="Container image URL")
    ] = None
    description: Annotated[str | None, Field(description="Template description")] = None
    created_at: Annotated[
        AwareDatetime | None, Field(alias="createdAt", description="Creation time")
    ] = None


class CreateTemplateRequest(BaseModel):
    name: Annotated[str, Field(description="Template name", max_length=255, min_length=1)]
    instance_id: Annotated[str, Field(alias="instanceId", description="Source instance ID")]
    description: Annotated[str | None, Field(description="Template description")] = None


class DeleteTemplateRequest(BaseModel):
    id: Annotated[str, Field(description="Template ID to delete")]


class ListEndpointsResponse(BaseModel):
    data: Annotated[list[EndpointDetail], Field(description="List of serverless endpoints")]
    total: Annotated[int, Field(description="Total number of endpoints")]


class ListJobsResponse(BaseModel):
    data: Annotated[list[Job], Field(description="List of jobs")]


class ListImagePrewarmTasksResponse(BaseModel):
    data: Annotated[list[ImagePrewarmTask], Field(description="List of image prewarm tasks")]


class ListRepositoryAuthsResponse(BaseModel):
    data: Annotated[
        list[RepositoryAuth],
        Field(description="List of container registry authentications"),
    ]


class ListNetworksResponse(BaseModel):
    data: Annotated[list[NetworkModel], Field(description="List of VPC networks")]


class ListNetworkStoragesResponse(BaseModel):
    data: Annotated[list[NetworkStorage], Field(description="List of network storage volumes")]


class ListTemplatesResponse(BaseModel):
    data: Annotated[list[Template], Field(description="List of templates")]
